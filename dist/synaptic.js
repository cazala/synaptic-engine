!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.synaptic=i():t.synaptic=i()}(this,function(){return function(t){function i(n){if(e[n])return e[n].exports;var r=e[n]={exports:{},id:n,loaded:!1};return t[n].call(r.exports,r,r.exports,i),r.loaded=!0,r.exports}var e={};return i.m=t,i.c=e,i.p="/",i(0)}([function(t,i,e){"use strict";var n=e(1);i.Engine=n.default;var r=e(2);i.Network=r.default;var a=e(4);i.Trainer=a.default;var o=e(5),s=e(6),h=e(7),d=e(8),u=e(3),c=e(9),f={ASM:o.default,BLAS:s.default,CPU:h.default,GPU:d.default,Paper:u.default,WebWorker:c.default};i.backends=f;var l=e(10),p=e(11),g=e(12),y=e(13),v=e(14),w=e(15),T=e(16),m=e(17),b=e(18),O=e(19),E=e(20),I=e(21),S=e(22),P=e(23),L=e(24),N=e(25),_=e(26),G={Activation:l,Convolution:p.default,Convolution2D:g.default,Convolution3D:y.default,Dense:v.default,Dropout:w.default,Input:T.default,Input2D:m.default,Input3D:b.default,InputToOutput:O,LSTM:E.default,MaxPool:I.default,MaxPool2D:S.default,MaxPool3D:P.default,ZeroPadding:L.default,ZeroPadding2D:N.default,ZeroPadding3D:_.default};i.layers=G},function(t,i){"use strict";function e(){for(var t=[],i=0;i<arguments.length;i++)t[i-0]=arguments[i];var e,n=t.reduce(function(t,i){return t.concat(i||[])},[]),r={},a=[];for(e=0;e<n.length;r[n[e++]]=1);for(e in r)a.push(+e);return a}!function(t){t[t.LOGISTIC_SIGMOID=0]="LOGISTIC_SIGMOID",t[t.TANH=1]="TANH",t[t.RELU=2]="RELU",t[t.MAX_POOLING=3]="MAX_POOLING",t[t.DROPOUT=4]="DROPOUT",t[t.IDENTITY=5]="IDENTITY"}(i.ActivationTypes||(i.ActivationTypes={}));var n=i.ActivationTypes;!function(t){t[t.IDLE=0]="IDLE",t[t.INIT=1]="INIT",t[t.REVERSE_INIT=2]="REVERSE_INIT",t[t.ACTIVATING=3]="ACTIVATING",t[t.PROPAGATING=4]="PROPAGATING",t[t.TRAINING=5]="TRAINING"}(i.StatusTypes||(i.StatusTypes={}));var r=i.StatusTypes,a={bias:!0,generator:function(){return 2*Math.random()-1}},o=function(){function t(t){var i=void 0===t?a:t,e=i.bias,n=i.generator;this.state={},this.weight={},this.gain={},this.activation={},this.elegibilityTrace={},this.extendedElegibilityTrace={},this.errorResponsibility={},this.projectedErrorResponsibility={},this.gatedErrorResponsibility={},this.activationFunction={},this.inputsOf={},this.projectedBy={},this.gatersOf={},this.gatedBy={},this.inputsOfGatedBy={},this.projectionSet={},this.gateSet={},this.inputSet={},this.derivativeTerm={},this.connections=[],this.gates=[],this.learningRate=.1,this.layers=[],this.size=0,this.biasUnit=null,this.status=r.IDLE,this.random=n,this.status=r.IDLE,e&&(this.biasUnit=this.addUnit(),this.activation[this.biasUnit]=1)}return t.prototype.addUnit=function(t){void 0===t&&(t=n.LOGISTIC_SIGMOID);var i=this.size;return this.state[i]=this.random(),this.weight[i]={},this.gain[i]={},this.elegibilityTrace[i]={},this.extendedElegibilityTrace[i]={},this.activation[i]=0,this.weight[i][i]=0,this.gain[i][i]=1,this.elegibilityTrace[i][i]=0,this.extendedElegibilityTrace[i][i]={},this.activationFunction[i]=t,this.errorResponsibility[i]=0,this.projectedErrorResponsibility[i]=0,this.gatedErrorResponsibility[i]=0,this.inputsOf[i]=[],this.projectedBy[i]=[],this.gatersOf[i]=[],this.gatedBy[i]=[],this.inputsOfGatedBy[i]={},this.derivativeTerm[i]={},this.inputSet[i]=[],this.projectionSet[i]=[],this.gateSet[i]=[],this.size++,null!=this.biasUnit&&this.addConnection(this.biasUnit,i),i},t.prototype.addConnection=function(t,i,e){if(void 0===e&&(e=null),!this.connections.some(function(e){return e.from===t&&e.to===i})){this.connections.push({from:t,to:i});var n=i,r=t,a=t===i;this.gain[n][r]=1,this.weight[n][r]=a?1:null==e?this.random():e,this.elegibilityTrace[n][r]=0,this.extendedElegibilityTrace[n][r]={},this.track(i),this.track(t)}},t.prototype.addGate=function(t,i,e){var n=this.gates.some(function(e){return e.from===t&&e.to===i}),r=t===this.biasUnit;n||r||(this.gates.push({from:t,to:i,gater:e}),this.track(i),this.track(t),this.track(e))},t.prototype.addLayer=function(t,i){if(void 0===t&&(t=0),this.status===r.REVERSE_INIT)throw new Error("You can't add layers during REVERSE_INIT phase!");for(var e=[],n=0;n<t;n++){var a=this.addUnit(i);e.push(a)}return this.layers.push(e),e},t.prototype.track=function(t){var i=this;this.inputsOf[t]=e(this.connections.filter(function(i){return i.to===t}).map(function(t){return t.from})),this.projectedBy[t]=e(this.connections.filter(function(i){return i.from===t}).map(function(t){return t.to})),this.gatersOf[t]=e(this.gates.filter(function(i){return i.to===t}).map(function(t){return t.gater})),this.gatedBy[t]=e(this.gates.filter(function(i){return i.gater===t}).map(function(t){return t.to})),this.inputsOf[t].forEach(function(e){i.gatedBy[t].forEach(function(n){i.extendedElegibilityTrace[t][e][n]=0})}),this.projectedBy[t].forEach(function(e){i.gatedBy[e].forEach(function(n){i.extendedElegibilityTrace[e][t][n]=0})}),this.gatersOf[t].forEach(function(e){i.inputsOf[e].forEach(function(n){i.extendedElegibilityTrace[e][n][t]=0})}),this.inputsOf[t].forEach(function(n){i.gatersOf[t].forEach(function(r){i.inputsOfGatedBy[t][r]=e(i.inputsOfGatedBy[t][r],i.gates.filter(function(i){return i.gater===r&&i.to===t&&i.from===n}).map(function(t){return t.from}))})}),this.gatedBy[t].forEach(function(n){i.inputsOf[n].forEach(function(r){i.inputsOfGatedBy[n][t]=e(i.inputsOfGatedBy[n][t],i.gates.filter(function(i){return i.gater===t&&i.to===n&&i.from===r}).map(function(t){return t.from}))})}),this.gatedBy[t].forEach(function(e){i.derivativeTerm[e][t]=i.gates.some(function(i){return i.to===e&&i.from===e&&i.gater===t})?1:0}),this.gatersOf[t].forEach(function(e){i.derivativeTerm[t][e]=i.gates.some(function(i){return i.to===t&&i.from===t&&i.gater===e})?1:0}),this.inputSet[t]=this.inputsOf[t].filter(function(i){return i!==t}),this.projectionSet[t]=this.projectedBy[t].filter(function(i){return i>t}),this.gateSet[t]=this.gatedBy[t].filter(function(i){return i>t})},t.prototype.toJSON=function(){return JSON.stringify({state:this.state,weight:this.weight,gain:this.gain,activation:this.activation,elegibilityTrace:this.elegibilityTrace,extendedElegibilityTrace:this.extendedElegibilityTrace,errorResponsibility:this.errorResponsibility,projectedErrorResponsibility:this.projectedErrorResponsibility,gatedErrorResponsibility:this.gatedErrorResponsibility,activationFunction:this.activationFunction,inputsOf:this.inputsOf,projectedBy:this.projectedBy,gatersOf:this.gatersOf,gatedBy:this.gatedBy,inputsOfGatedBy:this.inputsOfGatedBy,projectionSet:this.projectionSet,gateSet:this.gateSet,inputSet:this.inputSet,derivativeTerm:this.derivativeTerm,connections:this.connections,gates:this.gates,learningRate:this.learningRate,layers:this.layers,size:this.size,biasUnit:this.biasUnit})},t.prototype.clone=function(){return t.fromJSON(this.toJSON())},t.fromJSON=function(i){var e=JSON.parse(i),n=new t;return Object.keys(e).forEach(function(t){return n[t]=e[t]}),n},t.prototype.clear=function(){},t}();Object.defineProperty(i,"__esModule",{value:!0}),i.default=o},function(t,i,e){"use strict";function n(t){return t&&(t.layers||t.engine||t.backend||t.bias||t.generator)&&!t[0]}var r=e(1),a=e(3),o=function(){function t(){for(var t=this,i=[],e=0;e<arguments.length;e++)i[e-0]=arguments[e];var o,s=i[0];if(n(s)){if("backend"in s)this.backend=s.backend;else if("engine"in s)this.backend=new a.default(s.engine);else if("bias"in s||"generator"in s){var h=new r.default(s);this.backend=new a.default(h)}o=s.layers||[]}else this.backend=new a.default,o=i.slice();this.engine=this.backend.engine;var d=null,u=null;this.engine.status=r.StatusTypes.INIT;var c=[];o.forEach(function(i){d=i.init&&i.init(t,d)||d,c.push(d)}),this.engine.status=r.StatusTypes.REVERSE_INIT,c.reverse(),o.reverse().forEach(function(i,e){u=c[e-1]||u,i.reverseInit&&i.reverseInit(t,u)}),this.engine.status=r.StatusTypes.IDLE}return t.prototype.addUnit=function(t){return this.engine.addUnit(t)},t.prototype.addConnection=function(t,i,e){return void 0===e&&(e=null),this.engine.addConnection(t,i,e)},t.prototype.addGate=function(t,i,e){return this.engine.addGate(t,i,e)},t.prototype.addLayer=function(t,i,e){return void 0===t&&(t=0),void 0===i&&(i=1),void 0===e&&(e=1),this.engine.addLayer(t*i*e)},t.prototype.getLayers=function(){return this.engine.layers.slice()},t.prototype.toJSON=function(){return this.engine.toJSON()},t.prototype.clone=function(){return t.fromJSON(this.toJSON())},t.prototype.activate=function(t){return this.backend.activate(t)},t.prototype.propagate=function(t){this.backend.propagate(t)},t.fromJSON=function(i){var e=r.default.fromJSON(i);return new t({engine:e})},t}();Object.defineProperty(i,"__esModule",{value:!0}),i.default=o},function(t,i,e){"use strict";function n(t,i){return t.reduce(function(t,e){return t+i(e)},0)}var r=e(1),a=e(4),o=function(){function t(t){void 0===t&&(t=new r.default),this.engine=t,this.activateUnit=this.activateUnit.bind(this),this.propagateUnit=this.propagateUnit.bind(this),this.activate=this.activate.bind(this),this.propagate=this.propagate.bind(this),this.bigParenthesisTerm=this.bigParenthesisTerm.bind(this),this.activationFunction=this.activationFunction.bind(this),this.activationFunctionDerivative=this.activationFunctionDerivative.bind(this),this.costFunction=this.costFunction.bind(this),this.train=this.train.bind(this)}return t.prototype.activateUnit=function(t,i){var e=t,r=this.engine.state,a=this.engine.weight,o=this.engine.gain,s=this.engine.activation,h=this.activationFunction,d=this.activationFunctionDerivative,u=this.engine.elegibilityTrace,c=this.engine.extendedElegibilityTrace,f=this.engine.inputSet,l=this.engine.gatedBy,p=this.engine.inputsOfGatedBy;if("undefined"!=typeof i)s[e]=i;else{r[e]=o[e][e]*a[e][e]*r[e]+n(f[e],function(t){return o[e][t]*a[e][t]*s[t]}),s[e]=h(e);for(var g=0,y=f[e];g<y.length;g++){var v=y[g];u[e][v]=o[e][e]*a[e][e]*u[e][v]+o[e][v]*s[v];for(var w=0,T=l[e];w<T.length;w++){var m=T[w];c[e][v][m]=o[m][m]*a[m][m]*c[e][v][m]+d(e)*u[e][v]*this.bigParenthesisTerm(m,e)}}for(var b=0,O=l[t];b<O.length;b++)for(var E=O[b],I=0,S=p[E][t];I<S.length;I++){var P=S[I];o[E][P]=s[t]}}return s[e]},t.prototype.propagateUnit=function(t,i){var e=this,r=t,a=(this.engine.state,this.engine.weight),o=this.engine.gain,s=this.engine.activation,h=this.activationFunctionDerivative,d=this.engine.errorResponsibility,u=this.engine.projectedErrorResponsibility,c=this.engine.gatedErrorResponsibility,f=this.engine.learningRate,l=this.engine.elegibilityTrace,p=this.engine.extendedElegibilityTrace,g=this.engine.projectionSet,y=this.engine.gateSet,v=this.engine.inputSet;"undefined"!=typeof i?d[r]=u[r]=i-s[r]:(u[r]=h(r)*n(g[r],function(t){return d[t]*o[t][r]*a[t][r]}),c[r]=h(r)*n(y[r],function(t){return d[t]*e.bigParenthesisTerm(t,r)}),d[r]=u[r]+c[r]);for(var w=function(t){var i=f*u[r]*l[r][t]+f*n(y[r],function(i){return d[i]*p[r][t][i]});a[r][t]+=i},T=0,m=v[r];T<m.length;T++){var b=m[T];w(b)}},t.prototype.bigParenthesisTerm=function(t,i){var e=this.engine.weight,r=this.engine.state,a=this.engine.activation,o=this.engine.derivativeTerm[t][i],s=this.engine.inputsOfGatedBy[t][i];return o*e[t][t]*r[t]+n(s.filter(function(i){return i!==t}),function(i){return e[t][i]*a[i]})},t.prototype.activationFunction=function(t){var i,e=this,n=this.engine.activationFunction[t];switch(n){case r.ActivationTypes.LOGISTIC_SIGMOID:return i=this.engine.state[t],1/(1+Math.exp(-i));case r.ActivationTypes.TANH:i=this.engine.state[t];var a=Math.exp(i),o=1/a;return(a-o)/(a+o);case r.ActivationTypes.RELU:return i=this.engine.state[t],i>0?i:0;case r.ActivationTypes.IDENTITY:return i=this.engine.state[t];case r.ActivationTypes.MAX_POOLING:var s=this.engine.inputsOf[t][0],h=this.engine.gatedBy[t][0],d=this.engine.inputsOfGatedBy[h][t],u=d.reduce(function(t,i){return Math.max(e.engine.activation[i],t)},-(1/0)),c=d.find(function(t){return e.engine.activation[t]===u});return c===s?1:0;case r.ActivationTypes.DROPOUT:var f=this.engine.state[t];return this.engine.random()<f&&this.engine.status===r.StatusTypes.TRAINING?0:1}},t.prototype.activationFunctionDerivative=function(t){var i,e=this.engine.activationFunction[t];switch(e){case r.ActivationTypes.LOGISTIC_SIGMOID:return i=this.activationFunction(t),i*(1-i);case r.ActivationTypes.TANH:return i=this.activationFunction(t),1-Math.pow(i,2);case r.ActivationTypes.RELU:return 0;case r.ActivationTypes.IDENTITY:return 0;case r.ActivationTypes.MAX_POOLING:return 0;case r.ActivationTypes.DROPOUT:return 0}},t.prototype.costFunction=function(t,i,e){var n,r=0;switch(e){case a.CostTypes.MSE:for(n=0;n<t.length;n++)r+=Math.pow(t[n]-i[n],2);return r/t.length;case a.CostTypes.CROSS_ENTROPY:for(n=0;n<t.length;n++)r-=t[n]*Math.log(i[n]+1e-15)+(1-t[n])*Math.log(1+1e-15-i[n]);return r;case a.CostTypes.BINARY:for(n=0;n<t.length;n++)r+=Math.round(2*t[n])!=Math.round(2*i[n])?1:0;return r}},t.prototype.activate=function(t){var i=this;this.engine.status=r.StatusTypes.ACTIVATING;var e=this.engine.layers.map(function(e,n){return e.map(function(e,r){var a=0===n?t[r]:void 0;return i.activateUnit(e,a)})});return this.engine.status=r.StatusTypes.IDLE,e.pop()},t.prototype.propagate=function(t){var i=this;this.engine.status=r.StatusTypes.PROPAGATING,this.engine.layers.slice(1).reverse().forEach(function(e,n){e.slice().reverse().forEach(function(e,r){var a=0===n?t[r]:void 0;i.propagateUnit(e,a)})}),this.engine.status=r.StatusTypes.IDLE},t.prototype.train=function(t,i){var e=this,n=i.learningRate,a=i.minError,o=i.maxIterations,s=i.costFunction;return new Promise(function(i){var h=(new Date).getTime(),d=1/0,u=0;for(e.engine.learningRate=n,e.engine.status=r.StatusTypes.TRAINING;d>a&&u<o;){d=0;for(var c=0,f=t;c<f.length;c++){var l=f[c],p=l.input,g=l.output,y=e.activate(p);e.propagate(g),d+=e.costFunction(g,y,s)}d/=t.length,u++}e.engine.status=r.StatusTypes.IDLE,i({error:d,iterations:u,time:(new Date).getTime()-h})})},t}();Object.defineProperty(i,"__esModule",{value:!0}),i.default=o},function(t,i){"use strict";!function(t){t[t.MSE=0]="MSE",t[t.CROSS_ENTROPY=1]="CROSS_ENTROPY",t[t.BINARY=2]="BINARY"}(i.CostTypes||(i.CostTypes={}));var e=i.CostTypes,n=function(){function t(t){this.network=t}return t.prototype.train=function(t,i){var n=i.learningRate,r=i.minError,a=i.maxIterations,o=i.costFunction;return this.network.backend.train(t,{learningRate:n||.3,minError:r||5e-4,maxIterations:a||5e3,costFunction:o||e.MSE})},t.prototype.test=function(t,i){},t}();Object.defineProperty(i,"__esModule",{value:!0}),i.default=n},function(t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default={}},function(t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default={}},function(t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default={}},function(t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default={}},function(t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default={}},function(t,i,e){"use strict";var n=e(1),r=function(){function t(){this.layer=null}return t.prototype.init=function(t,i){if(null==i)throw new Error("'Activation.ReLU' cannot be the first layer of the network!");var e=i.layer;this.layer=t.addLayer(e.length,n.ActivationTypes.RELU);for(var r=0;r<e.length;r++)t.addConnection(e[r],this.layer[r],1);return{width:i.width,height:i.height,depth:i.depth,layer:this.layer}},t}();i.ReLU=r},function(t,i){"use strict";var e=function(){function t(t){var i=t.filter,e=void 0===i?1:i,n=t.height,r=void 0===n?1:n,a=t.depth,o=void 0===a?1:a,s=t.stride,h=void 0===s?1:s,d=t.padding,u=void 0===d?0:d;this.filter=e,this.height=r,this.depth=o,this.stride=h,this.padding=u,this.layer=null}return t.prototype.init=function(t,i){if(null==i)throw new Error("'Convolution' cannot be the first layer of the network!");this.layer=t.addLayer();var e,n,r,a,o,s,h,d;for(r=0;r<this.depth;r++)for(n=0;n<this.height;n++)for(e=this.padding;e<i.width-this.padding;e+=this.stride){var u=t.addUnit();this.layer.push(u);for(var c=this.filter/2,f=-c;f<c;f++)for(a=Math.round(e+f),s=0;s<i.depth;s++)for(o=0;o<i.height;o++)this.isValid(i,a,o,s)&&(d=u,h=i.layer[a+o*i.height+s*i.height*i.depth],t.addConnection(h,d))}return{width:(i.width-this.padding)/this.stride|0,height:this.height,depth:this.depth,layer:this.layer}},t.prototype.isValid=function(t,i,e,n){return i>0&&i<t.width&&e>0&&e<t.height&&n>0&&n<t.depth},t}();Object.defineProperty(i,"__esModule",{value:!0}),i.default=e},function(t,i){"use strict";var e=function(){function t(t){var i=t.filter,e=void 0===i?1:i,n=t.depth,r=void 0===n?1:n,a=t.stride,o=void 0===a?1:a,s=t.padding,h=void 0===s?0:s;this.filter=e,this.depth=r,this.stride=o,this.padding=h,this.layer=null}return t.prototype.init=function(t,i){if(null==i)throw new Error("'Convolution2D' cannot be the first layer of the network!");this.layer=t.addLayer();var e,n,r,a,o,s,h,d;for(r=0;r<this.depth;r++)for(n=this.padding;n<i.height-this.padding;n+=this.stride)for(e=this.padding;e<i.width-this.padding;e+=this.stride){var u=t.addUnit();this.layer.push(u);for(var c=this.filter/2,f=-c;f<c;f++)for(var l=-c;l<c;l++)for(a=Math.round(e+l),o=Math.round(n+f),s=0;s<i.depth;s++)this.isValid(i,a,o,s)&&(d=u,h=i.layer[a+o*i.height+s*i.height*i.depth],t.addConnection(h,d))}return{width:(i.width-this.padding)/this.stride|0,height:(i.height-this.padding)/this.stride|0,depth:this.depth,layer:this.layer}},t.prototype.isValid=function(t,i,e,n){return i>0&&i<t.width&&e>0&&e<t.height&&n>0&&n<t.depth},t}();Object.defineProperty(i,"__esModule",{value:!0}),i.default=e},function(t,i){"use strict";var e=function(){function t(t){var i=t.filter,e=void 0===i?1:i,n=t.stride,r=void 0===n?1:n,a=t.padding,o=void 0===a?0:a;this.filter=e,this.stride=r,this.padding=o,this.layer=null}return t.prototype.init=function(t,i){if(null==i)throw new Error("'Convolution3D' cannot be the first layer of the network!");this.layer=t.addLayer();var e,n,r,a,o,s,h,d;for(r=this.padding;r<i.depth-this.padding;r+=this.stride)for(n=this.padding;n<i.height-this.padding;n+=this.stride)for(e=this.padding;e<i.width-this.padding;e+=this.stride){var u=t.addUnit();this.layer.push(u);for(var c=this.filter/2,f=-c;f<c;f++)for(var l=-c;l<c;l++)for(var p=-c;p<c;p++)a=Math.round(e+p),o=Math.round(n+l),s=Math.round(n+f),this.isValid(i,a,o,s)&&(d=u,h=i.layer[a+o*i.height+s*i.height*i.depth],t.addConnection(h,d))}return{width:(i.width-this.padding)/this.stride|0,height:(i.height-this.padding)/this.stride|0,depth:(i.depth-this.padding)/this.stride|0,layer:this.layer}},t.prototype.isValid=function(t,i,e,n){return i>0&&i<t.width&&e>0&&e<t.height&&n>0&&n<t.depth},t}();Object.defineProperty(i,"__esModule",{value:!0}),i.default=e},function(t,i){"use strict";var e=function(){function t(t){this.size=t}return t.prototype.init=function(t,i){var e=this;if(null==i)throw new Error("'Dense' cannot be the first layer of the network!");return this.layer=t.addLayer(this.size),i.layer.forEach(function(i){e.layer.forEach(function(e){t.addConnection(i,e)})}),{width:this.size,height:1,depth:1,layer:this.layer}},t}();Object.defineProperty(i,"__esModule",{value:!0}),i.default=e},function(t,i,e){"use strict";var n=e(1),r=function(){function t(t){this.chances=t,this.gater=null,this.layer=null}return t.prototype.init=function(t,i){if(null==i)throw new Error("'Dropout' cannot be the first layer of the network!");this.gater=t.addLayer(),this.layer=t.addLayer();for(var e,r,a,o=0;o<i.layer.length;o++){e=t.addUnit(n.ActivationTypes.IDENTITY),this.layer.push(e),r=i.layer[o],a=e,t.addConnection(r,a,1);var s=t.addUnit(n.ActivationTypes.DROPOUT);t.addGate(r,a,s),this.gater.push(s),t.engine.state[s]=this.chances,t.addConnection(s,s)}return{width:i.width,height:i.height,depth:i.depth,layer:this.layer}},t}();Object.defineProperty(i,"__esModule",{value:!0}),i.default=r},function(t,i){"use strict";var e=function(){function t(t){this.size=t,this.size=t}return t.prototype.init=function(t,i){if(null!=i)throw new Error("'Input' must be the first layer of the network!");return this.layer=t.addLayer(this.size),{width:this.size,height:1,depth:1,layer:this.layer}},t}();Object.defineProperty(i,"__esModule",{value:!0}),i.default=e},function(t,i){"use strict";var e=function(){function t(t,i){this.width=t,this.height=i,this.layer=null}return t.prototype.init=function(t,i){if(null!=i)throw new Error("'Input2D' must be the first layer of the network!");return this.layer=t.addLayer(this.width,this.height),{width:this.width,height:this.height,depth:1,layer:this.layer}},t}();Object.defineProperty(i,"__esModule",{value:!0}),i.default=e},function(t,i){"use strict";var e=function(){function t(t,i,e){this.width=t,this.height=i,this.depth=e,this.layer=null}return t.prototype.init=function(t,i){if(null!=i)throw new Error("'Input3D' must be the first layer of the network!");return this.layer=t.addLayer(this.width,this.height,this.depth),{width:this.width,height:this.height,depth:this.depth,layer:this.layer}},t}();Object.defineProperty(i,"__esModule",{value:!0}),i.default=e},function(t,i){"use strict";var e=function(){function t(){}return t.prototype.reverseInit=function(t,i){if(null!=i)throw new Error("'InputToOutput' must be the last layer of the network!");var e=t.getLayers(),n=e[0],r=e[e.length-1];n.forEach(function(i){r.forEach(function(e){t.addConnection(i,e)})})},t}();i.Direct=e},function(t,i){"use strict";function e(t,i,e,n){i.forEach(function(n,r){e.forEach(function(a,o){i===e&&r!==o||t.addConnection(n,a)})})}function n(t,i,e,n){for(var r,a,o,s=function(s){switch(n){case"SELF":r=e[s],a=e[s],o=i[s],t.addGate(r,a,o);break;case"INBOUND":a=e[s],o=i[s],t.engine.connections.filter(function(t){return t.to===a}).filter(function(t){return t.from!==a}).map(function(t){return t.from}).forEach(function(i){return t.addGate(i,a,o)});break;case"OUTBOUND":e.forEach(function(n){r=e[s],o=i[s],t.engine.connections.filter(function(t){return t.from===r}).filter(function(t){return t.to!==r}).map(function(t){return t.to}).forEach(function(i){return t.addGate(r,i,o)})})}},h=0;h<i.length;h++)s(h)}var r={peepholes:!0},a=function(){function t(t,i){var e=(void 0===i?r:i).peepholes;this.memoryBlocks=t,this.prevLayer=null,this.nextLayer=null,this.inputGate=null,this.forgetGate=null,this.memoryCell=null,this.outputGate=null,this.peepholes=e}return t.prototype.init=function(t,i){if(null==i)throw new Error("'LSTM' cannot be the first layer of the network!");return this.prevLayer=i.layer,this.inputGate=t.addLayer(this.memoryBlocks),this.forgetGate=t.addLayer(this.memoryBlocks),this.memoryCell=t.addLayer(this.memoryBlocks),this.outputGate=t.addLayer(this.memoryBlocks),e(t,this.prevLayer,this.memoryCell),e(t,this.memoryCell,this.memoryCell),e(t,this.prevLayer,this.inputGate),e(t,this.prevLayer,this.forgetGate),e(t,this.prevLayer,this.outputGate),n(t,this.inputGate,this.memoryCell,"INBOUND"),n(t,this.forgetGate,this.memoryCell,"SELF"),{width:this.memoryCell.length,height:1,depth:1,layer:this.memoryCell}},t.prototype.reverseInit=function(t,i){this.nextLayer=i.layer,e(t,this.prevLayer,this.nextLayer),n(t,this.outputGate,this.memoryCell,"OUTBOUND"),this.peepholes&&(e(t,this.memoryCell,this.inputGate),e(t,this.memoryCell,this.forgetGate),e(t,this.memoryCell,this.outputGate))},t}();Object.defineProperty(i,"__esModule",{value:!0}),i.default=a},function(t,i,e){"use strict";var n=e(1),r=function(){function t(t){void 0===t&&(t=2),this.downsampling=t,this.gater=null,this.layer=null}return t.prototype.init=function(t,i){if(null==i)throw new Error("'MaxPool' cannot be the first layer of the network!");this.gater=t.addLayer(),this.layer=t.addLayer();for(var e,r,a,o,s=0;e<i.depth;s++)for(var h=0;h<i.height;h++)for(var d=0;d<i.width;d+=this.downsampling){var u=t.addUnit(n.ActivationTypes.IDENTITY);this.layer.push(u);for(var c=0;c<this.downsampling;c++)if(r=d+c,a=h,o=s,this.isValid(i,r,a,o)){var f=i.layer[r+a*i.height+o*i.height*i.depth],l=u;t.addConnection(f,l,1);var p=t.addUnit(n.ActivationTypes.MAX_POOLING);t.addGate(f,l,p),this.gater.push(p),t.addConnection(f,p)}}return{width:i.width/this.downsampling|0,height:i.height,depth:i.depth,layer:this.layer}},t.prototype.isValid=function(t,i,e,n){return i>0&&i<t.width&&e>0&&e<t.height&&n>0&&n<t.depth},t}();Object.defineProperty(i,"__esModule",{value:!0}),i.default=r},function(t,i,e){"use strict";var n=e(1),r=function(){function t(t){void 0===t&&(t=2),this.downsampling=t,this.gater=null,this.layer=null}return t.prototype.init=function(t,i){if(null==i)throw new Error("'MaxPool2D' cannot be the first layer of the network!");this.gater=t.addLayer(),this.layer=t.addLayer();for(var e,r,a,o,s=0;e<i.depth;s++)for(var h=0;h<i.height;h+=this.downsampling)for(var d=0;d<i.width;d+=this.downsampling){var u=t.addUnit(n.ActivationTypes.IDENTITY);this.layer.push(u);for(var c=0;c<this.downsampling;c++)for(var f=0;f<this.downsampling;f++)if(r=d+f,a=h+c,o=s,this.isValid(i,r,a,o)){var l=i.layer[r+a*i.height+o*i.height*i.depth],p=u;t.addConnection(l,p,1);var g=t.addUnit(n.ActivationTypes.MAX_POOLING);t.addGate(l,p,g),this.gater.push(g),t.addConnection(l,g)}}return{width:i.width/this.downsampling|0,height:i.height/this.downsampling|0,depth:i.depth,layer:this.layer}},t.prototype.isValid=function(t,i,e,n){return i>0&&i<t.width&&e>0&&e<t.height&&n>0&&n<t.depth},t}();Object.defineProperty(i,"__esModule",{value:!0}),i.default=r},function(t,i,e){"use strict";var n=e(1),r=function(){function t(t){void 0===t&&(t=2),this.downsampling=t,this.downsampling=t,this.gater=null,this.layer=null}return t.prototype.init=function(t,i){if(null==i)throw new Error("'MaxPool3D' cannot be the first layer of the network!");this.gater=t.addLayer(),this.layer=t.addLayer();for(var e,r,a,o,s=0;e<i.depth;s+=this.downsampling)for(var h=0;h<i.height;h+=this.downsampling)for(var d=0;d<i.width;d+=this.downsampling){var u=t.addUnit(n.ActivationTypes.IDENTITY);this.layer.push(u);for(var c=0;c<this.downsampling;c++)for(var f=0;f<this.downsampling;f++)for(var l=0;l<this.downsampling;l++)if(r=d+l,a=h+f,o=s+c,this.isValid(i,r,a,o)){var p=i.layer[r+a*i.height+o*i.height*i.depth],g=u;t.addConnection(p,g,1);var y=t.addUnit(n.ActivationTypes.MAX_POOLING);t.addGate(p,g,y),this.gater.push(y),t.addConnection(p,y)}}return{width:i.width/this.downsampling|0,height:i.height/this.downsampling|0,depth:i.depth/this.downsampling|0,layer:this.layer}},t.prototype.isValid=function(t,i,e,n){return i>0&&i<t.width&&e>0&&e<t.height&&n>0&&n<t.depth},t}();Object.defineProperty(i,"__esModule",{value:!0}),i.default=r},function(t,i,e){"use strict";var n=e(1),r=function(){function t(t){this.padding=t,this.layer=null}return t.prototype.init=function(t,i){if(null==i)throw new Error("'ZeroPadding' cannot be the first layer of the network!");this.layer=t.addLayer();var e,r,a,o,s;for(a=0;a<i.depth;a++)for(r=0;r<i.height;r++)for(e=-this.padding;e<i.width+this.padding;e++){var h=t.addUnit(n.ActivationTypes.IDENTITY);this.layer.push(h),this.isPadding(i,e,r,a)||(s=h,o=i.layer[e+r*i.height+a*i.height*i.depth],t.addConnection(o,s))}return{width:i.width+2*this.padding,height:i.height,depth:i.height,layer:this.layer}},t.prototype.isPadding=function(t,i,e,n){return i<0||i>t.width||e<0||e>t.height||n<0||n>t.depth},t}();Object.defineProperty(i,"__esModule",{value:!0}),i.default=r},function(t,i,e){"use strict";var n=e(1),r=function(){function t(t){this.padding=t,this.layer=null}return t.prototype.init=function(t,i){if(null==i)throw new Error("'ZeroPadding2D' cannot be the first layer of the network!");this.layer=t.addLayer();var e,r,a,o,s;for(a=0;a<i.depth;a++)for(r=-this.padding;r<i.height+this.padding;r++)for(e=-this.padding;e<i.width+this.padding;e++){var h=t.addUnit(n.ActivationTypes.IDENTITY);this.layer.push(h),this.isPadding(i,e,r,a)||(s=h,o=i.layer[e+r*i.height+a*i.height*i.depth],t.addConnection(o,s))}return{width:i.width+2*this.padding,height:i.height+2*this.padding,depth:i.height,layer:this.layer}},t.prototype.isPadding=function(t,i,e,n){return i<0||i>t.width||e<0||e>t.height||n<0||n>t.depth},t}();Object.defineProperty(i,"__esModule",{value:!0}),i.default=r},function(t,i,e){"use strict";var n=e(1),r=function(){function t(t){this.padding=t,this.layer=null}return t.prototype.init=function(t,i){if(null==i)throw new Error("'ZeroPadding3D' cannot be the first layer of the network!");this.layer=t.addLayer();var e,r,a,o,s;for(a=-this.padding;a<i.depth+this.padding;a++)for(r=-this.padding;r<i.height+this.padding;r++)for(e=-this.padding;e<i.width+this.padding;e++){var h=t.addUnit(n.ActivationTypes.IDENTITY);this.layer.push(h),this.isPadding(i,e,r,a)||(s=h,o=i.layer[e+r*i.height+a*i.height*i.depth],t.addConnection(o,s))}return{width:i.width+2*this.padding,height:i.height+2*this.padding,depth:i.height+2*this.padding,layer:this.layer}},t.prototype.isPadding=function(t,i,e,n){return i<0||i>t.width||e<0||e>t.height||n<0||n>t.depth},t}();Object.defineProperty(i,"__esModule",{value:!0}),i.default=r}])});